package com.ardnew.iba;

import com.ardnew.iba.plugin.Control;
import com.ardnew.iba.plugin.Echo;
import com.ardnew.iba.plugin.Log;

import org.schwering.irc.lib.IRCConnection;

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// file:
//   IRCThread.java
//
// description:
//   TODO
//
// author:
//   ardnew, andrew@ardnew.com
//
// date:
//   April 20, 2013
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
public class IRCThread extends IRCConnection
{
  
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// private instance members
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  
  private IRCHost _host;
  private IRCUser _user;
  
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// constructors 
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

  public IRCThread(IRCHost host, IRCUser user) throws IllegalArgumentException
  {
    super(host.host(), new int[]{ host.port() }, host.pass(), user.nick(), user.user(), user.name());
    
    this._host = host;
    this._user = user;
    
    try
    {
      this.addIRCEventListener(new Control(this));
      this.addIRCEventListener(new Log(this));
      this.addIRCEventListener(new Echo(this));
    }
    catch (IllegalArgumentException e)
    {
      
    }
  }
  
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// accessor/mutator methods for private instance members
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

  public IRCHost host()
  {
    return this._host;
  }
  
  public IRCUser user()
  {
    return this._user;
  }
  
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// overridden methods declared in super class
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

  @Override
  public String toString()
  {
    return 
      "IRCThread(" + this.hashCode() + ")=" +
      Util.q(
        Util.join(
          this.host().toString(), 
          this.user().toString()
        )
      );
  }
}
